<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manager Dashboard - Egyptian Restaurant</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header>
        <h1>üëî Manager Dashboard</h1>
    </header>

    <main>
        <div class="dashboard-header">
            <h2>Welcome, Manager!</h2>
            <div style="display: flex; gap: 1rem; align-items: center;">
                <a href="index.html" class="logout-btn" style="text-decoration: none; background: #28a745; padding: 0.5rem 1.5rem; border-radius: 5px; color: white; display: inline-block;">üè† Home</a>
                <button class="logout-btn" id="logout-btn">Logout</button>
            </div>
        </div>

        <div class="dashboard-content">
            <div class="dashboard-nav">
                <button class="nav-btn active" data-view="menu-management">Menu Management</button>
                <button class="nav-btn" data-view="table-management">Table Management</button>
                <button class="nav-btn" data-view="reservations">Reservations</button>
                <button class="nav-btn" data-view="feedback">Customer Feedback</button>
            </div>

            <!-- Menu Management View -->
            <div id="menu-management-view" class="view active">
                <div class="section-header">
                    <h2>Menu Management</h2>
                    <button class="btn btn-primary" id="add-menu-item-btn">+ Add New Item</button>
                </div>

                <div class="menu-filters">
                    <button class="filter-btn active" data-category="all">All</button>
                    <button class="filter-btn" data-category="appetizer">Appetizers</button>
                    <button class="filter-btn" data-category="main">Main Dishes</button>
                    <button class="filter-btn" data-category="dessert">Desserts</button>
                    <button class="filter-btn" data-category="beverage">Beverages</button>
                </div>

                <div class="management-grid" id="menu-items-grid">
                    <!-- Menu items will be populated here -->
                </div>
            </div>

            <!-- Table Management View -->
            <div id="table-management-view" class="view">
                <div class="section-header">
                    <h2>Table Management</h2>
                    <button class="btn btn-primary" id="add-table-btn">+ Add New Table</button>
                </div>

                <div class="tables-grid" id="tables-grid">
                    <!-- Tables will be populated here -->
                </div>
            </div>

            <!-- Reservations View -->
            <!-- Feedback View -->
            <div id="feedback-view" class="view">
                <div class="section-header">
                    <h2>Customer Feedback</h2>
                    <button class="btn btn-secondary" id="refresh-feedback-btn">üîÑ Refresh</button>
                </div>

                <div class="feedback-stats" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                    <div class="stat-card" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #007bff;" id="total-feedback-count">0</div>
                        <div style="color: #666; margin-top: 0.5rem;">Total Feedback</div>
                    </div>
                    <div class="stat-card" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2rem; font-weight: bold; color: #28a745;" id="avg-rating">0.0</div>
                        <div style="color: #666; margin-top: 0.5rem;">Average Rating</div>
                    </div>
                </div>

                <div class="feedback-filters" style="margin-bottom: 1rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="filter-btn active" data-rating="all">All Ratings</button>
                    <button class="filter-btn" data-rating="5">5 Stars</button>
                    <button class="filter-btn" data-rating="4">4 Stars</button>
                    <button class="filter-btn" data-rating="3">3 Stars</button>
                    <button class="filter-btn" data-rating="2">2 Stars</button>
                    <button class="filter-btn" data-rating="1">1 Star</button>
                </div>

                <div id="feedback-list" style="display: grid; gap: 1rem;">
                    <!-- Feedback items will be populated here -->
                </div>

                <div id="feedback-empty" style="text-align: center; padding: 3rem; color: #999; display: none;">
                    <p style="font-size: 1.2rem;">No feedback submitted yet.</p>
                </div>
            </div>

            <div id="reservations-view" class="view">
                <div class="section-header">
                    <h2>Reservations Management</h2>
                </div>

                <div class="reservations-filters">
                    <select id="reservation-filter" class="filter-select">
                        <option value="all">All Reservations</option>
                        <option value="today">Today</option>
                        <option value="upcoming">Upcoming</option>
                        <option value="past">Past</option>
                    </select>
                    <input type="date" id="reservation-date-filter" class="filter-input">
                </div>

                <div class="reservations-list" id="reservations-list">
                    <!-- Reservations will be populated here -->
                </div>
            </div>

            <div id="manager-message" class="message"></div>
        </div>
    </main>

    <!-- Add/Edit Menu Item Modal -->
    <div id="menu-item-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-menu-modal">&times;</span>
            <h2 id="menu-modal-title">Add New Menu Item</h2>
            <form id="menu-item-form">
                <input type="hidden" id="item-id" name="itemId">
                
                <div class="form-group">
                    <label for="item-name">Item Name *</label>
                    <input type="text" id="item-name" name="name" required>
                </div>

                <div class="form-group">
                    <label for="item-category">Category *</label>
                    <select id="item-category" name="category" required>
                        <option value="">Select Category</option>
                        <option value="appetizer">Appetizer</option>
                        <option value="main">Main Dish</option>
                        <option value="dessert">Dessert</option>
                        <option value="beverage">Beverage</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="item-description">Description *</label>
                    <textarea id="item-description" name="description" rows="3" required></textarea>
                </div>

                <div class="form-group">
                    <label for="item-price">Price (EGP) *</label>
                    <input type="number" id="item-price" name="price" step="0.01" min="0" required>
                </div>

                <div class="form-group">
                    <label for="item-ingredients">Ingredients (comma-separated)</label>
                    <input type="text" id="item-ingredients" name="ingredients" placeholder="e.g., Tomato, Onion, Garlic">
                </div>

                <div class="form-group">
                    <label for="item-allergens">Allergens (comma-separated)</label>
                    <input type="text" id="item-allergens" name="allergens" placeholder="e.g., Gluten, Dairy, Nuts">
                </div>

                <div class="form-group">
                    <label for="item-image">Image URL</label>
                    <input type="url" id="item-image" name="imageUrl" placeholder="https://example.com/image.jpg">
                </div>

                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" id="item-available" name="available" checked>
                        Available for Order
                    </label>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-menu-item">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Item</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add/Edit Table Modal -->
    <div id="table-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-table-modal">&times;</span>
            <h2 id="table-modal-title">Add New Table</h2>
            <form id="table-form">
                <input type="hidden" id="table-id" name="tableId">
                
                <div class="form-group">
                    <label for="table-number">Table Number *</label>
                    <input type="number" id="table-number" name="tableNumber" min="1" required>
                </div>

                <div class="form-group">
                    <label for="table-capacity">Capacity (Seats) *</label>
                    <input type="number" id="table-capacity" name="capacity" min="1" max="20" required>
                </div>

                <div class="form-group">
                    <label for="table-status">Status *</label>
                    <select id="table-status" name="status" required>
                        <option value="available">Available</option>
                        <option value="occupied">Occupied</option>
                        <option value="reserved">Reserved</option>
                        <option value="maintenance">Maintenance</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="table-location">Location</label>
                    <input type="text" id="table-location" name="location" placeholder="e.g., Window side, Patio, Main hall">
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancel-table">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Table</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Reservation Details Modal -->
    <div id="reservation-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-reservation-modal">&times;</span>
            <h2>Reservation Details</h2>
            <div id="reservation-details">
                <!-- Reservation details will be populated here -->
            </div>
            <div class="form-actions">
                <button class="btn btn-danger" id="cancel-reservation-btn">Cancel Reservation</button>
                <button class="btn btn-success" id="confirm-reservation-btn">Confirm Reservation</button>
                <button class="btn btn-secondary" id="close-reservation-details">Close</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/manager-dashboard.js"></script>
</body>
</html>